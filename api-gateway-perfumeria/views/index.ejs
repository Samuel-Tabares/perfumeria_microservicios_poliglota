<%- include('partials/header') %>

<div class="container">
    <header class="mb-4">
        <h1 class="text-center">Sistema de Perfumería - API Gateway</h1>
        <p class="text-center lead">Panel de control centralizado para gestionar los microservicios</p>
    </header>
    
    <div class="row mb-4">
        <div class="col-12 text-center">
            <button id="startAllBtn" class="btn btn-success btn-lg m-3">
                <i class="fas fa-play"></i> Iniciar Todos los Servicios
            </button>
            <button id="stopAllBtn" class="btn btn-danger btn-lg m-3">
                <i class="fas fa-stop"></i> Detener Todos los Servicios
            </button>
            <button id="refreshBtn" class="btn btn-info btn-lg m-3">
                <i class="fas fa-sync"></i> Actualizar Estado
            </button>
        </div>
    </div>

    <div class="row">
        <!-- Java Microservice -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h3 class="m-0">Proveedores</h3>
                    <span class="badge badge-pill status-badge <%- services.java.isRunning ? 'bg-success' : 'bg-danger' %>" data-service="java">
                        <%- services.java.isRunning ? 'Activo' : 'Inactivo' %>
                    </span>
                </div>
                <div class="card-body d-flex flex-column">
                    <p><strong>Tecnología:</strong> Java + Spring Boot</p>
                    <p><strong>Puerto:</strong> 8002</p>
                    <p><strong>Descripción:</strong> Gestión de proveedores y suministros</p>
                    
                    <div class="mt-auto text-center">
                        <button class="btn btn-primary btn-goto" data-service="java" <%- !services.java.isRunning && 'disabled' %>>
                            <i class="fas fa-external-link-alt"></i> Ir a la interfaz
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Python Microservice -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h3 class="m-0">Clientes</h3>
                    <span class="badge badge-pill status-badge <%- services.python.isRunning ? 'bg-success' : 'bg-danger' %>" data-service="python">
                        <%- services.python.isRunning ? 'Activo' : 'Inactivo' %>
                    </span>
                </div>
                <div class="card-body d-flex flex-column">
                    <p><strong>Tecnología:</strong> Python + FastAPI</p>
                    <p><strong>Puerto:</strong> 8001</p>
                    <p><strong>Descripción:</strong> Gestión de clientes y compras</p>
                    
                    <div class="mt-auto text-center">
                        <button class="btn btn-primary btn-goto" data-service="python" <%- !services.python.isRunning && 'disabled' %>>
                            <i class="fas fa-external-link-alt"></i> Ir a la interfaz
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Node Microservice -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h3 class="m-0">Productos</h3>
                    <span class="badge badge-pill status-badge <%- services.node.isRunning ? 'bg-success' : 'bg-danger' %>" data-service="node">
                        <%- services.node.isRunning ? 'Activo' : 'Inactivo' %>
                    </span>
                </div>
                <div class="card-body d-flex flex-column">
                    <p><strong>Tecnología:</strong> Node.js + Express</p>
                    <p><strong>Puerto:</strong> 8003</p>
                    <p><strong>Descripción:</strong> Gestión de productos y categorías</p>
                    
                    <div class="mt-auto text-center">
                        <button class="btn btn-primary btn-goto" data-service="node" <%- !services.node.isRunning && 'disabled' %>>
                            <i class="fas fa-external-link-alt"></i> Ir a la interfaz
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12 text-center">
            <div class="alert alert-info">
                <strong>Estado del Sistema:</strong> 
                <span id="systemStatus">
                    <%- services.java.isRunning && services.python.isRunning && services.node.isRunning ? 
                        'Todos los servicios están funcionando correctamente' : 
                        'Algunos servicios están detenidos' %>
                </span>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>